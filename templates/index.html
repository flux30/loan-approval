<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loan Approval System - Enterprise Expert AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="logo-icon">⚖️</span>
                <span>LoanExpert</span>
            </div>
            <ul class="nav-menu">
                <li><a href="/" class="nav-link active">System</a></li>
                <li><a href="/analysis" class="nav-link">Analysis</a></li>
                <li><a href="/documentation" class="nav-link">Docs</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">Intelligent Loan Approval</h1>
            <p class="hero-subtitle">Enterprise-grade rule-based expert system with dual-chain inference for confident lending decisions</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" id="evalAllBtn">
                    Evaluate Dataset
                </button>
                <button class="btn btn-secondary" id="customEvalBtn">
                    Custom Application
                </button>
            </div>
        </div>
    </section>

    <!-- Dataset Section -->
    <section class="applicants-section">
        <div class="applicants-container">
            <h2 class="section-title">Applicant Dataset</h2>
            <div class="table-wrapper">
                <table class="applicants-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Income</th>
                            <th>Credit</th>
                            <th>Employment</th>
                            <th>Duration</th>
                            <th>Age</th>
                            <th>Dependents</th>
                            <th>Debt</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="applicantsTableBody"></tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- Results Section -->
    <section class="section results-section" id="resultsSection">
        <h2 class="section-title">Evaluation Results</h2>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="totalEvaluated">0</div>
                <div class="stat-label">Total Evaluated</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" style="color: #10b981;" id="approvedCount">0</div>
                <div class="stat-label">Approved</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" style="color: #f59e0b;" id="conditionalCount">0</div>
                <div class="stat-label">Conditional</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" style="color: #ef4444;" id="rejectedCount">0</div>
                <div class="stat-label">Rejected</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" style="color: #3b82f6;" id="reviewCount">0</div>
                <div class="stat-label">Manual Review</div>
            </div>
        </div>
        <div class="results-cards" id="resultsCardsContainer"></div>
    </section>

    <!-- Custom Evaluation Modal -->
    <div class="modal" id="customEvalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>New Loan Application</h2>
                <button class="modal-close" id="modalCloseBtn">×</button>
            </div>
            <form id="customEvalForm" class="evaluation-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="applicantId">Application ID</label>
                        <input type="text" id="applicantId" placeholder="APP-001" required>
                    </div>
                    <div class="form-group">
                        <label for="income">Annual Income</label>
                        <input type="number" id="income" placeholder="75000" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="creditScore">Credit Score</label>
                        <input type="number" id="creditScore" min="300" max="850" placeholder="750" required>
                    </div>
                    <div class="form-group">
                        <label for="employmentStatus">Employment Status</label>
                        <select id="employmentStatus" required>
                            <option value="">Select...</option>
                            <option value="Employed">Employed</option>
                            <option value="Unemployed">Unemployed</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="employmentDuration">Employment (years)</label>
                        <input type="number" id="employmentDuration" step="0.5" placeholder="3" required>
                    </div>
                    <div class="form-group">
                        <label for="age">Age</label>
                        <input type="number" id="age" min="18" placeholder="35" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="dependents">Dependents</label>
                        <input type="number" id="dependents" min="0" placeholder="2" required>
                    </div>
                    <div class="form-group">
                        <label for="existingDebt">Existing Debt</label>
                        <select id="existingDebt" required>
                            <option value="">Select...</option>
                            <option value="None">None</option>
                            <option value="Low">Low</option>
                            <option value="Medium">Medium</option>
                            <option value="High">High</option>
                        </select>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Submit Application</button>
                    <button type="button" class="btn btn-secondary" id="formCancelBtn">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Trace Modal -->
    <div class="modal" id="traceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Reasoning Trace</h2>
                <button class="modal-close" id="traceCloseBtn">×</button>
            </div>
            <div class="trace-container" id="traceContainer"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>System</h4>
                <p>Enterprise rule-based expert system for intelligent loan approval</p>
            </div>
            <div class="footer-section">
                <h4>Navigation</h4>
                <ul>
                    <li><a href="/">System</a></li>
                    <li><a href="/analysis">Analysis</a></li>
                    <li><a href="/documentation">Documentation</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Features</h4>
                <ul>
                    <li>Forward Chaining</li>
                    <li>Backward Chaining</li>
                    <li>Conflict Resolution</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 LoanExpert Systems. All rights reserved.</p>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
